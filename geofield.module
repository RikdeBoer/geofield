<?php

/**
 * @TODO: Provide function/method to determine version.
 */

/*require_once('geofield.elements.inc');
require_once('geofield.widgets.inc');
require_once('geofield.formatters.inc');
require_once('geofield.openlayers.inc');
require_once('geofield.feeds.inc');
require_once('geofield.apachesolr.inc');
require_once('geofield.schemaorg.inc');
require_once('geofield.microdata.inc');*/

/* *
 * Max length of geohashes (imposed by database column length).
 */
define('GEOFIELD_GEOHASH_LENGTH', 16);

/**
 * Implements hook_field_info().
 */
function geofield_field_info() {
  return array(
    'geofield' => array(
      'label' => 'Geofield',
      'description' => t('This field stores geo information.'),
      'default_widget' => 'text_textfield',
      'default_formatter' => 'text_plain',
      'field item class' => 'Drupal\geofield\Type\GeofieldItem',
      'settings' => array(
        'backend' => 'default',
      ),
    ),
  );
}

/**
 * Implements hook_field_is_empty().
 * @TODO: Handle empty geometries. (i.e., a WKT value of GEOMETRYCOLLECTION EMPTY)
 */
function geofield_field_is_empty($item, $field) {
  return !isset($item['value']) || $item['value'] === '';
}

/**
 * Implements hook_field_presave().
 */
function geofield_field_presave($entity, $field, $instance, $langcode, &$items) {
  watchdog('geofield', 'Sanity check - geofield.module line 51');
}